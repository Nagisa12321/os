# So what is LDT/GDT?

### GDT

- GDT是全局描述符表.
- 一个CPU对应一个GDT表, GDT表可以放在内存的任何地方, 但是CPU必须要知道它在哪里
- **GDTR**就是用来存放GDT表的入口地址. 
- GDTR中存放的是GDT在内存中的基地址和其表长界限。
- 由GDTR访问GDT表是通过段选择子(Selector)来进行的. 
- 段选择子是一个16位的寄存器


### LDT

- LDT是局部描述符表. 
- 每个进程都有一张LDT表
- GDT为一级描述符表, LDT为二级描述符表
- LDT和GDT从本质上是相同的, LDT嵌套在GDT表之中. LDTR记录局部描述符表的起始位置
- LDT表中存放的是什么? 与GDTR不同，LDTR的内容是一个段选择子
- LDTR可以随时改变.(lldt指令)

### summary

- linux0.11中, 程序逻辑地址到物理地址的转换使用了CPU的全局段描述符表GDT和局部段描述符表LDT, 由GDT映射的地址空间称其为全局地址空间, 由LDT映射的地址空间成为局部地址空间, 而这两者构成了虚拟地址空间. 

### 关于jmpi 0, 8

首先会执行这两句指令
```
mov ax, 1H
mov cr0, ax
```
cr0当最后一位是1表示保护模式
因此现在是保护模式, 在执行jmpi 0, 8
因此现在cs是8, 是一个段选择子

在此之前会初始化gdt表
```
gdt:    .word   0, 0, 0, 0
        .word   0x07FF, 0x0000, 0x9A00, 0x00C0
        .word   0x07FF, 0x0000, 0x9200, 0x00C0
```
可以看出一个GDT表项是4个word组成. 一个word是16B, 因此是64B
根据GDT表项获得当前地址位0x0000