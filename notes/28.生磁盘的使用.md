## 生磁盘的使用

- 怎么让磁盘用起来

- 扇区大小512字节
- 磁盘的工作: 寻道 -- 旋转 -- 传输
- 柱面 -> 磁头 -> 扇区 -> 缓存位置

- 最后无非就是out指令

### 第一层抽象 -- 通过一个block号算出sec, head, cyl(CHS)

- 怎样给block编址?

  - 磁盘访问时间 = 写入控制器时间 + 寻道时间(花的时间最多) + 旋转时间 + 传输时间
  - 尽量少寻道, 相邻盘块号尽量放在物理磁盘的相邻之处

- 每次读写的大小如果增大, 读写的速度会上升。 
- 用空间换时间!!! 故意把读写的单位变大, 操作系统"认定"成一个盘块, 解释为连续扇区, 操作系统会根据你给的盘块号算出chs, 再通过out发给磁盘控制器操作磁盘

- b = c * (heads * sectors) * h * sectors + s
- heads: 磁头数目
- sectors: 扇区数

### 第二层抽象 -- 多进程通过队列使用磁盘
- 多个进程通过队列有序访问磁盘
- 什么时候从队列取出来呢? 
    - 肯定是磁盘中断的时候
    - 磁盘干完一件事就会中断一次

- 磁盘调度算法: 让寻道时间越少越好
    - fcfs
    - sstf: 短寻道优先, 经过**顺便**处理 
    - scan: 磁盘调度(电题算法·)